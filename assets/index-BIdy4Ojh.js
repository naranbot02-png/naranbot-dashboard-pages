(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function o(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(t){if(t.ep)return;t.ep=!0;const s=o(t);fetch(t.href,s)}})();const n={gateway:document.getElementById("gateway"),version:document.getElementById("version"),model:document.getElementById("model"),updated:document.getElementById("updated"),msgs:document.getElementById("msgs"),light:document.getElementById("light"),smart:document.getElementById("smart"),alerts:document.getElementById("alerts"),events:document.getElementById("events"),raw:document.getElementById("raw"),repos:document.getElementById("repos")};function d(e){try{return new Date(e).toLocaleString()}catch{return e}}function c(e,r){e.textContent=r==null||r===""?"—":String(r)}function u(e){c(n.gateway,e.gateway?.status||"unknown"),c(n.version,e.gateway?.version||"—"),c(n.model,e.model?.current||"—"),c(n.updated,d(e.updatedAt)),c(n.msgs,e.counters?.messagesToday??"—"),c(n.light,e.counters?.tickLightToday??"—"),c(n.smart,e.counters?.tickSmartToday??"—"),c(n.alerts,(e.alerts||[]).length?e.alerts.map(o=>o.title).join(" · "):"ninguna"),n.repos.innerHTML="",(e.repos||[]).forEach(o=>{const i=document.createElement("li");i.innerHTML=`<a href="${o.url}" target="_blank" rel="noreferrer">${o.name}</a>`+(o.pages?` — <a href="${o.pages}" target="_blank" rel="noreferrer">Pages</a>`:""),n.repos.appendChild(i)});const r=(e.events||[]).slice(0,30).map(o=>`[${o.ts}] ${o.kind}: ${o.msg}`).join(`
`);n.events.textContent=r||"—",n.raw.textContent=JSON.stringify(e,null,2)}async function a(){const r=await(await fetch("./status.json?ts="+Date.now(),{cache:"no-store"})).json();u(r)}document.getElementById("btn").addEventListener("click",a);a().catch(e=>{n.events.textContent="Error cargando status.json: "+e});
